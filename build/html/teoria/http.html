

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="es" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="es" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>HTTP &mdash; documentación de Arquitectura de Redes - </title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Índice" href="../genindex.html" />
    <link rel="search" title="Búsqueda" href="../search.html" />
    <link rel="next" title="P2P" href="p2p.html" />
    <link rel="prev" title="FTP" href="ftp.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Arquitectura de Redes
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Teoría</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#principal">Principal</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#wan-y-ruteo">WAN y ruteo</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#capa-aplicacion-y-otros">Capa aplicación y otros</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="6to4.html">6to4</a></li>
<li class="toctree-l3"><a class="reference internal" href="dns.html">DNS</a></li>
<li class="toctree-l3"><a class="reference internal" href="mail.html">Mail</a></li>
<li class="toctree-l3"><a class="reference internal" href="ftp.html">FTP</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">HTTP</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#versiones">Versiones</a></li>
<li class="toctree-l4"><a class="reference internal" href="#requests">Requests</a></li>
<li class="toctree-l4"><a class="reference internal" href="#respuestas">Respuestas</a></li>
<li class="toctree-l4"><a class="reference internal" href="#https">HTTPS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#proxy">Proxy</a></li>
<li class="toctree-l4"><a class="reference internal" href="#capturas">Capturas</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="p2p.html">P2P</a></li>
<li class="toctree-l3"><a class="reference internal" href="multimedia.html">Multimedia</a></li>
<li class="toctree-l3"><a class="reference internal" href="voip.html">VOIP</a></li>
<li class="toctree-l3"><a class="reference internal" href="gestion.html">Gestión de redes</a></li>
<li class="toctree-l3"><a class="reference internal" href="seguridad.html">Seguridad</a></li>
<li class="toctree-l3"><a class="reference internal" href="tls.html">TLS</a></li>
<li class="toctree-l3"><a class="reference internal" href="qos.html">QOS</a></li>
<li class="toctree-l3"><a class="reference internal" href="acceso_remoto.html">Acceso remoto</a></li>
<li class="toctree-l3"><a class="reference internal" href="programacion.html">Programación</a></li>
<li class="toctree-l3"><a class="reference internal" href="gns3.html">GNS3</a></li>
<li class="toctree-l3"><a class="reference internal" href="wireshark.html">Wireshark</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../practica/index.html">Práctica</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Arquitectura de Redes</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Teoría</a> &raquo;</li>
        
      <li>HTTP</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/teoria/http.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="http">
<h1>HTTP<a class="headerlink" href="#http" title="Enlazar permanentemente con este título">¶</a></h1>
<p>Hypertext Transfer Protocol.</p>
<ul class="simple">
<li><p>Utiliza MIME, ver <a class="reference internal" href="mail.html"><span class="doc">Mail</span></a>.</p></li>
<li><p>Para mí usa URLs, pero por ahí leo que usa URIs, no se:</p>
<ul>
<li><p>URI (Universal Resource Identifier): Es un string de caracteres que
identifica sin ambiguedades a un recurso. Abarca al conecpto de URN y URL.</p></li>
<li><p>URN (Universal Resource Name): Es una URI que identifica a un recurso por
nombre pero no dice dónde está ubicado. Por ejemplo un nombre cualquiera.</p></li>
<li><p>URL (Universal Resource Locator): Es una URI que especifica la ubicación de
un recurso, por ejemplo
<code class="docutils literal notranslate"><span class="pre">http://ejemplo.com:8080/carpeta/archivo.extension?query=value&amp;query2=value2</span></code>.
Especifica protocolo, nombre de servidor, puerto, ubicación de recurso y
opcionalmente dar valores.</p></li>
</ul>
</li>
</ul>
<div class="section" id="versiones">
<h2>Versiones<a class="headerlink" href="#versiones" title="Enlazar permanentemente con este título">¶</a></h2>
<ul class="simple">
<li><p>HTTP/0.9: Obsoleta. Soporta sólo un comando, GET, no especifica el número de
versión HTTP.</p></li>
<li><p>HTTP/1.0 (mayo 1996): Especifica su versión en las comunicaciones, y todavía
se usa ampliamente, sobre todo en servidores proxy.</p></li>
<li><p>HTTP/1.1 (junio 1999): Las conexiones persistentes están activadas por defecto
y funcionan bien con los proxies. También permite al cliente enviar múltiples
peticiones a la vez (pipelining) lo que hace posible eliminar el tiempo de
round-trip delay por cada petición.</p></li>
<li><p>HTTP/2.0 (mayo 2015): Minimiza el número de peticiones ya que el servidor
responde con datos que no fueron requeridos por el cliente en los casos en
donde el servidor conoce lo que necesita el cliente. De esta forma no es
necesario que el cliente analice la respuesta y haga otra petición.</p></li>
<li><p>HTTP/3.0 (futuro): Se basará en el <em>draft</em> RFC que permite HTTP sobre QUIC
(que vendría a ser un protocolo de transporte de baja latencia basado en UDP).</p></li>
</ul>
</div>
<div class="section" id="requests">
<h2>Requests<a class="headerlink" href="#requests" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Las peticiones contienen:</p>
<ol class="arabic simple">
<li><p>Una línea que contiene el método, su argumento y la versión, por ejemplo <code class="docutils literal notranslate"><span class="pre">GET</span>
<span class="pre">/index.html</span> <span class="pre">HTTP/1.1</span></code>.</p></li>
<li><p>Headers de request.</p></li>
<li><p>Una línea vacía.</p></li>
<li><p>Un cuerpo de mensaje (a veces es opcional)</p></li>
</ol>
<div class="section" id="metodos">
<h3>Métodos<a class="headerlink" href="#metodos" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Pueden tener como propiedades:</p>
<ul class="simple">
<li><p>Safe: Por ejemplo GET y HEAD se consideran seguros porque normalmente no
tienen efectos secundarios, sólo realizan lecturas de recursos. De todas
formas el servidor puede producir efectos secundarios pero ya es cuestión
suya.</p></li>
<li><p>Idempotent: Por ejemplo GET, HEAD, PUT y DELETE, significa que producen el
mismo resultado si son llamados una vez que si son llamados más de una vez.</p></li>
<li><p>Cacheable: Significa que la respuesta es cacheable.</p></li>
</ul>
<p>La lista de métodos más usados es:</p>
<ul>
<li><p>GET (Safe, Idempotent, Cacheable): Solicita un recurso determinado. Es posible
hacer un <em>GET condicional</em> si se usa un header <em>If-Modified-Since</em>,
<em>If-Match</em>, etc. Es posible hacer un <em>GET parcial</em> si se especifica un rango.</p></li>
<li><p>HEAD (Safe, Idempotent, Puede ser cacheable): Igual que GET, pero solicita
sólo el encabezado, dejando atrás el cuerpo de la respuesta.</p></li>
<li><p>PUT (Idempotent): Solicita al servidor ubicar los datos presentes en esta
solicitud en la ubicación determinada por la URI, ya sea modificando o creando
un recurso nuevo.</p>
<p>Si se crea el recurso debe responder 201 (Created). Si se modifica un recurso
debe responder 200 (Ok) o 204 (No Content).</p>
</li>
<li><p>POST (Cacheable): Similar a PUT pero la URI determina la ubicación del
contenedor del recurso en vez de la ubicación del recurso en sí. Por ejemplo
la URI puede describir a una carpeta, un formulario, una base de datos, un
grupo de noticias, etc.</p>
<p>Si el recurso creado no puede identificarse por una URI responde con un 200
(OK) o 204 (No Content). Si se crea un recurso debe responder con 201
(Created) y especificar la ubicación.</p>
</li>
<li><p>DELETE (Idempotent): Solicita el borrado de un determinado recurso.</p>
<p>Debe responder 200 (OK) o 204 (No Content) si se ha borrado, si está por ser
borrado debe responder 202 (Accepted).</p>
</li>
<li><p>TRACE (Safe, Idempotent): Solicita al servidor que responda con todos los
datos que recibe en un 200 (OK), una especie de <em>echo</em>. Se usa para observar
si servidores intermedios hacen modificaciones en la petición.</p></li>
<li><p>OPTIONS (Idempotent): Solicita que el servidor responda con los métodos HTTP
que soporta en determinada URI, si la URI es un <code class="docutils literal notranslate"><span class="pre">*</span></code> se aplica al servidor en
general.</p></li>
<li><p>CONNECT: Sólo se utiliza ante servidores proxy, solicita al proxy realizar un
túnel TCP para tráfico de cualquier tipo, ver abajo sobre Proxy.</p></li>
<li><p>PATCH: Produce determinadas modificaciones en un recurso.</p></li>
</ul>
</div>
<div class="section" id="headers">
<h3>Headers<a class="headerlink" href="#headers" title="Enlazar permanentemente con este título">¶</a></h3>
<div class="admonition-todo admonition" id="id1">
<p class="admonition-title">Por hacer</p>
<p>HEaders</p>
</div>
<p>Más usados:</p>
<ul class="simple">
<li><p>Accept: Indica que sólo acepta recibir ciertos tipos de archivos.</p></li>
<li><p>Accept-Charset: Tipos de codificación de caracteres aceptados.</p></li>
<li><p>Accept-Encoding: Por ejemplo si acepta archivos comprimidos.</p></li>
<li><p>Accept-Language: Lenguajes naturales aceptados (inglés, español, …).</p></li>
<li><p>Allow: Métodos válidos para ser usados en ese recurso.</p></li>
</ul>
</div>
</div>
<div class="section" id="respuestas">
<h2>Respuestas<a class="headerlink" href="#respuestas" title="Enlazar permanentemente con este título">¶</a></h2>
<p>La respuesta consiste de:</p>
<ol class="arabic simple">
<li><p>Línea de estado, que contiene la versión, el código de estado y un mensaje.</p></li>
<li><p>Headers de respuesta.</p></li>
<li><p>Línea vacía.</p></li>
<li><p>Un cuerpo de mensaje (a veces es opcional)</p></li>
</ol>
<p>La lísta de códigos de estado más importante es:</p>
<ul class="simple">
<li><p>Informational: 1XX</p></li>
<li><p>Successful: 2XX</p></li>
<li><p>Redirection: 3XX</p></li>
<li><p>Client Error: 4XX</p></li>
<li><p>Server Error: 5XX</p></li>
</ul>
</div>
<div class="section" id="https">
<h2>HTTPS<a class="headerlink" href="#https" title="Enlazar permanentemente con este título">¶</a></h2>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p>No tengo mucha idea sobre esto así que a lo mejor le pifio en algo.</p>
</div>
<div class="admonition-todo admonition" id="id2">
<p class="admonition-title">Por hacer</p>
<p>Explicar en forma general que es HTTPS, TLS, SSL, etc.</p>
</div>
</div>
<div class="section" id="proxy">
<h2>Proxy<a class="headerlink" href="#proxy" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Voy a hablar sobre proxy centrandome en el servidor Squid, pero hay más.</p>
<div class="section" id="tipos">
<h3>Tipos<a class="headerlink" href="#tipos" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>Elite Proxy: El proxy hace la request hacia el servidor destino normalmente,
como si la petición se originara desde el proxy.</p></li>
<li><p>Anonymous Proxy: Al hacer la petición, el proxy coloca el header <em>HTTP_VIA</em>
para indicar que se está utilizando un proxy. Opcionalmente utiliza también el
header <em>HTTP_X_FORWARDED_FOR</em> indicando la IP del proxy.</p></li>
<li><p>Transparent Proxy: El proxy utiliza el header <em>HTTP_X_FORWARDED_FOR</em> colocando
la IP del cliente, de esta forma el servidor de destino conoce la IP del
cliente. También se envía <em>HTTP_VIA</em> indicando que se está utilizando un
servidor proxy.</p></li>
<li><p>Inline, Forced o Transparent Proxy: A veces se usa el término <em>Transparent
Proxy</em> para nombrar a los servidores proxy que interceptan las comunicaciones
entre el cliente y el servidor web, por lo tanto no es necesaria la
configuración de los clientes. Se necesita habilitar el forwarding IP en el
proxy.</p></li>
<li><p>Accelerator proxy: Se coloca en frente de uno o unos pocos servidores web y se
apunta al DNS para que las consultas de los clientes vayan al proxy. De esta
forma el proxy permite mejorar el rendimiento de un servidor web lento gracias
a los cachés.</p></li>
<li><p>Túnel CONNECT: El cliente pide a un proxy redirigir una conexión TCP a un
destino, sólo la petición inicial es HTTP, luego de eso es simplemente un
túnel TCP. Se utiliza sobre todo para hacer proxy de HTTPS, ver abajo para más
info.</p></li>
</ul>
<div class="admonition-todo admonition" id="id3">
<p class="admonition-title">Por hacer</p>
<p>Buscar sobre la aquitectura multinivel</p>
</div>
</div>
<div class="section" id="proxy-https">
<h3>Proxy HTTPS<a class="headerlink" href="#proxy-https" title="Enlazar permanentemente con este título">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p>No tengo mucha idea, esto es lo que leí por ahí. Pongo las
referencias a todo lo que pueda.</p>
</div>
<p>Como la comunicación es punto a punto no se puede descifrar la información, pero
sí se puede hacer de túnel por donde pasarán las comunicaciones cifradas. Para
el proxy el tráfico no es más que una conexión TCP, y no puede obtener ningún
tipo de información. Esto se llama <a class="reference external" href="https://en.wikipedia.org/wiki/HTTP_tunnel">túnel CONNECT</a>.</p>
<p>Como el tráfico es simplemente una conexión TCP, el proxy no tiene forma de
saber si es realmente tráfico HTTPS o una conexión TCP cualquiera. Por eso Squid
usa la directiva <code class="docutils literal notranslate"><span class="pre">deny</span> <span class="pre">CONNECT</span> <span class="pre">!SSL_Ports</span></code> que impide túneles <em>CONNECT</em> en
puertos que no sean específicos de SSL (<a class="reference external" href="https://wiki.squid-cache.org/Features/HTTPS">ver acá</a>).</p>
<p>Si uno quiere realmente descifrar tráfico HTTPS tiene que hacer una conexión
cifrada entre el proxy y el servidor web y otra entre el proxy y el cliente. La
conexión entre el proxy y el servidor web no es un problema, ya que el servidor
web ve al proxy como un cliente más. El problema está en que el cliente no se
debe dar cuenta de que está conectándose al proxy en vez del servidor web, por
lo tanto el proxy debe crear un certificado temporal generado dinámicamente para
cada conexión en particular. Esto se llama ataque <em>Man-in-the-middle</em>.</p>
<p>Cuando uno se conecta a una página web con HTTPS, obtiene un certificado firmado
por un <em>Certificate Authority</em> (<em>CA</em>) que es una organización confiable, la
lista de organizaciones confiables es seleccionada por Google/Mozilla ya que
viene dentro del navegador. Cuando uno solicita un certificado, el <em>CA</em> se
asegura de que uno realmente tiene posesión del sitio por el cual uno solicita
el certificado, esta es la razón por la cual no es posible hacer ataques
<em>Man-in-the-middle</em> y por lo tanto proxies que descifren tráfico HTTPS.</p>
<p>Una alternativa es crear certificados que no están firmados por una <em>CA</em>, estos
certificados se llaman <em>self-signed</em> ya que están cifrados por nosotros mismos.
El problema con estos certificados es que los navegadores no confían en ellos y
al conectarse muestran una pantalla roja de advertencia. Para eliminar esto uno
debe configurar el navegador de cada cliente para que confíe en nuestros
certificados.</p>
<p><a class="reference external" href="https://wiki.squid-cache.org/ConfigExamples/Intercept/SslBumpExplicit">Como dice la documentación de Squid</a> no es imposible de que un <em>CA</em> otorgue
permisos para generar certificados firmados a discreción, pero esto puede llevar
a que los navegadores dejen de confiar en estos <em>CAs</em> <a class="reference external" href="https://bugzilla.mozilla.org/show_bug.cgi?id=724929">como pasó</a> <a class="reference external" href="https://www.computerworld.com/article/2501291/internet/trustwave-admits-issuing-man-in-the-middle-digital-certificate--mozilla-debates-punishment.html">con
Trustwave</a>.</p>
</div>
</div>
<div class="section" id="capturas">
<h2>Capturas<a class="headerlink" href="#capturas" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Captura al acceder a <a class="reference external" href="http://neverssl.com">http://neverssl.com</a>, que es uno de los pocos sitios
conocidos que quedan sin seguridad HTTPS:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>192.168.0.200  99.84.25.225    TCP     33386 → 80 [SYN] Seq=0 Win=29200 Len=0 MSS=1460 SACK_PERM=1 TSval=775244109 TSecr=0 WS=1024
99.84.25.225   192.168.0.200   TCP     80 → 33386 [SYN, ACK] Seq=0 Ack=1 Win=28960 Len=0 MSS=1412 SACK_PERM=1 TSval=1721758292 TSecr=775244109 WS=256
192.168.0.200  99.84.25.225    TCP     33386 → 80 [ACK] Seq=1 Ack=1 Win=29696 Len=0 TSval=775244180 TSecr=1721758292
192.168.0.200  99.84.25.225    HTTP    GET / HTTP/1.1
99.84.25.225   192.168.0.200   TCP     80 → 33386 [ACK] Seq=1 Ack=321 Win=30208 Len=0 TSval=1721758382 TSecr=775245004
99.84.25.225   192.168.0.200   TCP     80 → 33386 [PSH, ACK] Seq=1 Ack=321 Win=30208 Len=428 TSval=1721758382 TSecr=775245004 [TCP segment of a reassembled PDU]
192.168.0.200  99.84.25.225    TCP     33386 → 80 [ACK] Seq=321 Ack=429 Win=30720 Len=0 TSval=775245069 TSecr=1721758382
99.84.25.225   192.168.0.200   TCP     80 → 33386 [PSH, ACK] Seq=429 Ack=321 Win=30208 Len=1215 TSval=1721758404 TSecr=775245069 [TCP segment of a reassembled PDU]
192.168.0.200  99.84.25.225    TCP     33386 → 80 [ACK] Seq=321 Ack=1644 Win=33792 Len=0 TSval=775245292 TSecr=1721758404
99.84.25.225   192.168.0.200   HTTP    HTTP/1.1 200 OK  (text/html)
192.168.0.200  99.84.25.225    TCP     33386 → 80 [ACK] Seq=321 Ack=1649 Win=33792 Len=0 TSval=775245293 TSecr=1721758404
192.168.0.200  99.84.25.225    HTTP    GET /favicon.ico HTTP/1.1
99.84.25.225   192.168.0.200   HTTP    HTTP/1.1 200 OK  (PNG)
192.168.0.200  99.84.25.225    TCP     33386 → 80 [ACK] Seq=573 Ack=2211 Win=35840 Len=0 TSval=775245439 TSecr=1721758419
192.168.0.200  99.84.25.225    TCP     [TCP Keep-Alive] 33386 → 80 [ACK] Seq=572 Ack=2211 Win=35840 Len=0 TSval=775255443 TSecr=1721758419
99.84.25.225   192.168.0.200   TCP     [TCP Keep-Alive ACK] 80 → 33386 [ACK] Seq=2211 Ack=573 Win=31232 Len=0 TSval=1721759425 TSecr=775245439
192.168.0.200  99.84.25.225    TCP     [TCP Keep-Alive] 33386 → 80 [ACK] Seq=572 Ack=2211 Win=35840 Len=0 TSval=775265711 TSecr=1721759425
99.84.25.225   192.168.0.200   TCP     [TCP Keep-Alive ACK] 80 → 33386 [ACK] Seq=2211 Ack=573 Win=31232 Len=0 TSval=1721760452 TSecr=775245439
192.168.0.200  99.84.25.225    TCP     [TCP Keep-Alive] 33386 → 80 [ACK] Seq=572 Ack=2211 Win=35840 Len=0 TSval=775275951 TSecr=1721760452
99.84.25.225   192.168.0.200   TCP     [TCP Keep-Alive ACK] 80 → 33386 [ACK] Seq=2211 Ack=573 Win=31232 Len=0 TSval=1721761476 TSecr=775245439
192.168.0.200  99.84.25.225    TCP     [TCP Keep-Alive] 33386 → 80 [ACK] Seq=572 Ack=2211 Win=35840 Len=0 TSval=775286191 TSecr=1721761476
99.84.25.225   192.168.0.200   TCP     [TCP Keep-Alive ACK] 80 → 33386 [ACK] Seq=2211 Ack=573 Win=31232 Len=0 TSval=1721762500 TSecr=775245439
192.168.0.200  99.84.25.225    TCP     [TCP Keep-Alive] 33386 → 80 [ACK] Seq=572 Ack=2211 Win=35840 Len=0 TSval=775296431 TSecr=1721762500
99.84.25.225   192.168.0.200   TCP     [TCP Keep-Alive ACK] 80 → 33386 [ACK] Seq=2211 Ack=573 Win=31232 Len=0 TSval=1721763524 TSecr=775245439
192.168.0.200  99.84.25.225    TCP     33386 → 80 [FIN, ACK] Seq=573 Ack=2211 Win=35840 Len=0 TSval=775298329 TSecr=1721763524
99.84.25.225   192.168.0.200   TCP     80 → 33386 [FIN, ACK] Seq=2211 Ack=574 Win=31232 Len=0 TSval=1721763714 TSecr=775298329
192.168.0.200  99.84.25.225    TCP     33386 → 80 [ACK] Seq=574 Ack=2212 Win=35840 Len=0 TSval=775298392 TSecr=1721763714
</pre></div>
</div>
<p>Petición GET:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>GET / HTTP/1.1
Host: neverssl.com
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:66.0) Gecko/20100101 Firefox/66.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
DNT: 1
Connection: keep-alive
Upgrade-Insecure-Requests: 1
</pre></div>
</div>
<p>Headers de respuesta 200 OK, después vino el HTML comprimido en GZIP.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>HTTP/1.1 200 OK
Content-Type: text/html
Transfer-Encoding: chunked
Connection: keep-alive
Last-Modified: Thu, 14 Jun 2018 00:16:40 GMT
Server: AmazonS3
Content-Encoding: gzip
Date: Mon, 06 May 2019 15:27:39 GMT
Vary: Accept-Encoding
Age: 37060
X-Cache: Hit from cloudfront
Via: 1.1 eb0748e1a1029699052c373701cab0cc.cloudfront.net (CloudFront)
X-Amz-Cf-Id: _kvvdoHRj-r7lhjgq-UdFYtYDxEIv6gkK0Qc1x2yEm8XG7j0OuLEUg==
</pre></div>
</div>
<p>Para la request del favicon pasó algo similar.</p>
<div class="section" id="apis">
<h3>APIs<a class="headerlink" href="#apis" title="Enlazar permanentemente con este título">¶</a></h3>
<p>A partir de ahora uso curl porque permite ver los headers y hacer requests
específicas, como lo que viene va sobre TLS no lo puedo sniffear por Wireshark.</p>
<p>Algo común es acceder a lo que se llaman web APIs. Uno hace una request GET y
obtiene información en un formato legible por máquinas como JSON. Por ejemplo al
usar el comando:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>curl -v https://api.github.com/repos/martinber/arquitectura_de_redes/languages
</pre></div>
</div>
<p>Se hace una petición GET a GitHub solicitando la lista de lenguajes de
programación presentes en este repositorio, la opción <code class="docutils literal notranslate"><span class="pre">-v</span></code> muestra información
como el contenido de la request:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>GET /repos/martinber/arquitectura_de_redes/languages HTTP/1.1
Host: api.github.com
User-Agent: curl/7.64.0
Accept: */*
</pre></div>
</div>
<p>La respuesta es:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>HTTP/1.1 200 OK
Server: GitHub.com
Date: Tue, 07 May 2019 02:09:09 GMT
Content-Type: application/json; charset=utf-8
Content-Length: 118
Status: 200 OK
X-RateLimit-Limit: 60
X-RateLimit-Remaining: 54
X-RateLimit-Reset: 1557198090
Cache-Control: public, max-age=60, s-maxage=60
Vary: Accept
ETag: &quot;b45e78b5e786c0695807dd4e59209ac5&quot;
Last-Modified: Mon, 06 May 2019 11:54:25 GMT
X-GitHub-Media-Type: github.v3; format=json
Access-Control-Expose-Headers: ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type
Access-Control-Allow-Origin: *
Strict-Transport-Security: max-age=31536000; includeSubdomains; preload
X-Frame-Options: deny
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Referrer-Policy: origin-when-cross-origin, strict-origin-when-cross-origin
Content-Security-Policy: default-src &#39;none&#39;
X-GitHub-Request-Id: A89A:531E:13B69A9:2AB299D:5CD0E8C5

{
  &quot;HTML&quot;: 823436,
  &quot;JavaScript&quot;: 199061,
  &quot;CSS&quot;: 15111,
  &quot;Python&quot;: 5467,
  &quot;Batchfile&quot;: 827,
  &quot;Makefile&quot;: 620
}
</pre></div>
</div>
<p>Con un PUT se puede por ejemplo poner estrella a un repositorio, en este caso la
API pide un header y una autenticación:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>curl -v -X PUT -H &quot;Content-Length: 0&quot; -u &quot;martinber&quot; https://api.github.com/user/starred/martinber/arquitectura_de_redes
</pre></div>
</div>
<p>Tener en cuenta que la contraseña va en BASE64 e insegura si no fuera porque
todo va sobre TLS. Otras peticiones PUT podrían llevar datos pero esta justo no
lleva nada:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PUT /user/starred/martinber/arquitectura_de_redes HTTP/1.1
Host: api.github.com
Authorization: Basic bWFydGluYmVyOmVzdGFub2VzbWljb250cmFzZcOxYQ==
User-Agent: curl/7.64.0
Accept: */*
Content-Length: 0
</pre></div>
</div>
<p>La respuesta es:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>HTTP/1.1 204 No Content
Server: GitHub.com
Date: Tue, 07 May 2019 02:23:39 GMT
Content-Type: application/octet-stream
Status: 204 No Content
X-RateLimit-Limit: 5000
X-RateLimit-Remaining: 4996
X-RateLimit-Reset: 1557199419
X-GitHub-Media-Type: github.v3; format=json
Access-Control-Expose-Headers: ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type
Access-Control-Allow-Origin: *
Strict-Transport-Security: max-age=31536000; includeSubdomains; preload
X-Frame-Options: deny
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Referrer-Policy: origin-when-cross-origin, strict-origin-when-cross-origin
Content-Security-Policy: default-src &#39;none&#39;
X-GitHub-Request-Id: A9AA:2BDC:584874:F00459:5CD0EC2B
</pre></div>
</div>
<p>En este caso si se usa DELETE en vez de PUT hacia la misma URL, se elimina la
estrella.</p>
</div>
<div class="section" id="referencias">
<h3>Referencias<a class="headerlink" href="#referencias" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html">https://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html</a></p></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="p2p.html" class="btn btn-neutral float-right" title="P2P" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ftp.html" class="btn btn-neutral float-left" title="FTP" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018-2019, Martín Bernardi, Remedi Augusto, Rittano Ignacio

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>