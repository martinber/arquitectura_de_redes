

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Mail &mdash; documentación de Arquitectura de Redes - </title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Índice"
              href="../genindex.html"/>
        <link rel="search" title="Búsqueda" href="../search.html"/>
    <link rel="top" title="documentación de Arquitectura de Redes - " href="../index.html"/>
        <link rel="up" title="Teoría" href="index.html"/>
        <link rel="next" title="FTP" href="ftp.html"/>
        <link rel="prev" title="DNS" href="dns.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Arquitectura de Redes
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Teoría</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#principal">Principal</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#wan-y-ruteo">WAN y ruteo</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#capa-aplicacion-y-otros">Capa aplicación y otros</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="6to4.html">6to4</a></li>
<li class="toctree-l3"><a class="reference internal" href="dns.html">DNS</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Mail</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#explicacion-desde-wikipedia">Explicación desde Wikipedia</a></li>
<li class="toctree-l4"><a class="reference internal" href="#smtp">SMTP</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mime">MIME</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pop3">POP3</a></li>
<li class="toctree-l4"><a class="reference internal" href="#imap">IMAP</a></li>
<li class="toctree-l4"><a class="reference internal" href="#referencias">Referencias</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ftp.html">FTP</a></li>
<li class="toctree-l3"><a class="reference internal" href="http.html">HTTP</a></li>
<li class="toctree-l3"><a class="reference internal" href="p2p.html">P2P</a></li>
<li class="toctree-l3"><a class="reference internal" href="multimedia.html">Multimedia</a></li>
<li class="toctree-l3"><a class="reference internal" href="voip.html">VOIP</a></li>
<li class="toctree-l3"><a class="reference internal" href="gestion.html">Gestión de redes</a></li>
<li class="toctree-l3"><a class="reference internal" href="seguridad.html">Seguridad</a></li>
<li class="toctree-l3"><a class="reference internal" href="tls.html">TLS</a></li>
<li class="toctree-l3"><a class="reference internal" href="acceso_remoto.html">Acceso remoto</a></li>
<li class="toctree-l3"><a class="reference internal" href="gns3.html">GNS3</a></li>
<li class="toctree-l3"><a class="reference internal" href="wireshark.html">Wireshark</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../practica/index.html">Práctica</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Arquitectura de Redes</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Teoría</a> &raquo;</li>
        
      <li>Mail</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/teoria/mail.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="mail">
<h1>Mail<a class="headerlink" href="#mail" title="Enlazar permanentemente con este título">¶</a></h1>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Por hacer</p>
<p class="last">Separar SMTP y RFC 822?</p>
</div>
<p>Para entenderlo bien creo que habría que saberse un poco la historia de cómo fue
evolucionando porque es como que siempre se fueron corrigiendo cosas, sobre todo
para intentar mejorar la seguridad, disminuir el SPAM, impedir el <a class="reference external" href="https://en.wikipedia.org/wiki/Email_spoofing">spoofing</a>,
etc.</p>
<ul class="simple">
<li>Las direcciones de mail llevan el nombre de usuario seguido de arroba y el
nombre de dominio.</li>
<li>Los servidores utilizan el record MX del protocolo DNS para encontrar a los
servidores hacia dónde enviar los correos.</li>
<li>Existe el estándar SMTP que establece cómo se intercambian los correos, el
formato del correo en sí está definido en las RFCs 822 y 1049. Finalmente
existen los protocolos POP3 e IMAP que permite a los clientes obtener correos
desde su servidor de correo.</li>
<li>El formato de correo era originalmente ASCII de 7 bits con el bit superior en
cero, más adelante se define el estándar MIME (Multipurpose Internet Mail
Extensions) que permite codificar texto y datos binarios en ASCII de 7 bits.</li>
<li>El envío de los correos se realiza directamente desde la PC del usuario usando
SMTP. El mensaje llega hasta una casilla de correo en un servidor de correo y
es descargado en la PC del destinatario usando el protocolo POP3 o IMAP.</li>
<li>POP3 está pensado para descargar los correos desde un solo dispositivo, es muy
básico y normalmente los mensajes on borrados de la casilla de correo luego de
la descarga. IMAP está pensado para ser utilizado en línea desde varios
dispositivos, ya que permite solicitar mensajes específicos, ordenar y
mantener los mails en la casilla de correo.</li>
</ul>
<p>Hay distintos agentes (programas/servidores), al final hay servidores que son
más de una cosa a la vez pero la división sería la siguiente:</p>
<blockquote>
<div><ul class="simple">
<li>Mail User Agent (MUA): Es un cliente de correo, es el programa que usa el
usuario.</li>
<li>Mail Submission Agent (MSA): Recibe correos desde un MUA y lo envía a un
MTA. Es el primer servidor de la cadena y es recibe sólo correos de MUAs
autorizados.</li>
<li>Mail Transfer Agent (MTA): Transfiere correos de un agente a otro usando
SMTP, recibe correos desde MSAs o MTAs potencialmente desde otros dominios.</li>
<li>Mail Delivery Agent (MDA): Recibe mensajes desde un MTA y lleva los mensajes
a una casilla de correo local de un usuario. Hace también por ejemplo
filtrado de SPAM y separación de correos en carpetas.</li>
<li>Mail Retrieval Agent (MRA): Solicita mensajes a un MDA y los muestra al
usuario. Generalmente es el mismo software que el MUA.</li>
</ul>
</div></blockquote>
<p>Todos los pasos de la cadena menos el último usan SMTP. El último paso usa
POP3 o IMAP:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[MUA] --SMTP--&gt; [MSA] --SMTP--&gt; [MTA] --SMTP--&gt; [MTA] --SMTP--&gt; [MDA] --POP3/IMAP--&gt; [MRA]
</pre></div>
</div>
<div class="section" id="explicacion-desde-wikipedia">
<h2>Explicación desde Wikipedia<a class="headerlink" href="#explicacion-desde-wikipedia" title="Enlazar permanentemente con este título">¶</a></h2>
<img alt="../_images/mail.svg" src="../_images/mail.svg" /><p>Diagrama modificado por mí, original de Ale2006-from-en [<a class="reference external" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY-SA 3.0</a>].</p>
<blockquote>
<div><p>Email is submitted by a mail client (mail user agent, MUA) to a mail server
(mail submission agent, MSA) using SMTP on TCP port 587. Most mailbox providers
still allow submission on traditional port 25. The MSA delivers the mail to its
mail transfer agent (mail transfer agent, MTA). Often, these two agents are
instances of the same software launched with different options on the same
machine. Local processing can be done either on a single machine, or split among
multiple machines; mail agent processes on one machine can share files, but if
processing is on multiple machines, they transfer messages between each other
using SMTP, where each machine is configured to use the next machine as a smart
host. Each process is an MTA (an SMTP server) in its own right.</p>
<p>The boundary MTA uses the Domain name system (DNS) to look up the mail exchanger
record (MX record) for the recipient’s domain (the part of the email address on
the right of &#64;). Based on the target host and other factors the MTA selects an
exchange server, the MTA connects to the exchange server as an SMTP client.</p>
<p>Message transfer can occur in a single connection between two MTAs, or in a
series of hops through intermediary systems. A receiving SMTP server may be the
ultimate destination, an intermediate «relay» (that is, it stores and forwards
the message) or a «gateway» (that is, it may forward the message using some
protocol other than SMTP). Each hop is a formal handoff of responsibility for
the message, whereby the receiving server must either deliver the message or
properly report the failure to do so.</p>
<p>Once the final hop accepts the incoming message, it hands it to a mail delivery
agent (MDA) for local delivery. An MDA saves messages in the relevant mailbox
format. As with sending, this reception can be done using one or multiple
computers, but in the diagram above the MDA is depicted as one box near the
mail exchanger box. An MDA may deliver messages directly to storage, or forward
them over a network using SMTP or other protocol such as Local Mail Transfer
Protocol (LMTP), a derivative of SMTP designed for this purpose.</p>
<p>Once delivered to the local mail server, the mail is stored for batch retrieval
by authenticated mail clients (MUAs/MRAs). Mail is retrieved by end-user
applications, called email clients, using Internet Message Access Protocol
(IMAP), a protocol that both facilitates access to mail and manages stored mail,
or the Post Office Protocol (POP) which typically uses the traditional mbox mail
file format. Webmail clients may use either method, but the retrieval protocol
is often not a formal standard.</p>
<p>SMTP defines message transport, not the message content. Thus, it defines the
mail envelope and its parameters, such as the envelope sender, but not the
header (except trace information) nor the body of the message itself. STD 10
and RFC 5321 define SMTP (the envelope), while STD 11 and RFC 5322 define the
message (header and body), formally referred to as the Internet Message Format.</p>
</div></blockquote>
</div>
<div class="section" id="smtp">
<h2>SMTP<a class="headerlink" href="#smtp" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Simple Mail Transfer Protocol.</p>
<ul class="simple">
<li>Especifica cómo se deben enviar los mails.</li>
<li>Usa TCP, normalmente puerto 587 al conectarse a un MSA y puerto 25 en los
demás casos.</li>
<li>Es importante que el correo permita la entrega con retardo en el caso que se
pierda la conexión o la máquina remota falle, o sea si el otro servidor está
caído intentar de nuevo en unos minutos.</li>
<li>Está basado en texto, se envían comandos de junto con argumentos separados por
espacios. Se responde similar a HTTP.</li>
<li>Diseñado para enviar mensajes en texto plano, más adelante con STARTTLS los
correos viajan cifrados entre servidor y servidor pero no es un cifrado
extremo a extremo, ya que cada agente intermediario puede leer el correo.</li>
</ul>
<div class="section" id="comandos">
<h3>Comandos<a class="headerlink" href="#comandos" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Estos son los más importantes.</p>
<ul>
<li><p class="first"><strong>HELO</strong>: Enviado por el cliente para iniciar la conversación, generalmente se
envía como argumento el nombre de dominio del cliente.</p>
</li>
<li><p class="first"><strong>EHLO</strong>: Lo mismo que HELO pero indica que se va a usar Extended SMTP.</p>
</li>
<li><p class="first"><strong>STARTTLS</strong>: Solicita que se inicie una negociación TLS para que los siguientes
datos transmitidos viajen cifrados.</p>
</li>
<li><p class="first"><strong>AUTH</strong>: Autentica el cliente ante el servidor, envía el nombre de usuario y
contraseña en algún formato que puede ser en BASE64 (basicamente lo mismo que
texto plano) o CRAM-MD5 que es más seguro pero no tanto, por lo tanto conviene
usarlo junto con STARTTLS.</p>
</li>
<li><p class="first"><strong>MAIL FROM</strong>: Indica la dirección de mail del remitente.</p>
</li>
<li><p class="first"><strong>RCPT TO</strong>: Indica la dirección de mail del destino, se puede utilizar varias
veces para agregar más destinatarios.</p>
</li>
<li><p class="first"><strong>DATA</strong>: Comienza la transmisión de los contenidos del correo incluyendo los
archivos adjuntos. Para indicar el fin del mensaje se envía una línea con un
punto, es decir <code class="docutils literal notranslate"><span class="pre">\r\n.\r\n</span></code>.</p>
<p>El formato del mensaje no es parte de SMTP. Al comienzo del mensaje se
utilizan encabezados definidos en la RFC 822, luego se envía el mensaje en
formato MIME.</p>
<ul class="simple">
<li><strong>Date</strong>: Momento en el cuál el usuario envió el mensaje.</li>
<li><strong>From</strong>: Especifica quién escribió el mensaje</li>
<li><strong>Sender</strong>: Especifica quién fue en realidad el que envió el mensaje.</li>
<li><strong>To</strong>: Destinatarios principales del mensaje.</li>
<li><strong>Reply-To</strong>: Hacia dónde se deben enviar las respuestas.</li>
<li><strong>Cc</strong>: Destinatarios secundarios del mensaje.</li>
<li><strong>Bcc</strong>: Destinatarios ocultos del mensaje, es leído por el MUA y el campo es
borrado antes de enviar el mensaje.</li>
<li><strong>Subject</strong>: Resumen del mensaje.</li>
<li><strong>Message-ID</strong>: Identifica al mensaje.</li>
</ul>
</li>
<li><p class="first"><strong>QUIT</strong>: Cierra la conversación.</p>
</li>
</ul>
</div>
<div class="section" id="respuestas">
<h3>Respuestas<a class="headerlink" href="#respuestas" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Algunas de las respuestas son:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">2XX</span></code>: Success.<ul>
<li><code class="docutils literal notranslate"><span class="pre">220</span></code>: Servicio listo.</li>
<li><code class="docutils literal notranslate"><span class="pre">221</span></code>: Servicio cerrando conexión.</li>
<li><code class="docutils literal notranslate"><span class="pre">250</span></code>: Solicitud completada (Ok).</li>
</ul>
</li>
<li><code class="docutils literal notranslate"><span class="pre">3XX</span></code>: ???<ul>
<li><code class="docutils literal notranslate"><span class="pre">354</span></code>: Listo para recibir mensaje, enviado por el servidor luego del
comando DATA.</li>
</ul>
</li>
<li><code class="docutils literal notranslate"><span class="pre">4XX</span></code>: Falla temporal.<ul>
<li><code class="docutils literal notranslate"><span class="pre">421</span></code>: Servicio no disponible.</li>
<li><code class="docutils literal notranslate"><span class="pre">450</span></code>: Casilla de correo no disponible u ocupada.</li>
<li><code class="docutils literal notranslate"><span class="pre">451</span></code>: Error local en el procesamiento.</li>
</ul>
</li>
<li><code class="docutils literal notranslate"><span class="pre">5XX</span></code>: Falla permanente.<ul>
<li><code class="docutils literal notranslate"><span class="pre">501</span></code>: Error de sintaxis.</li>
<li><code class="docutils literal notranslate"><span class="pre">502</span></code>: Comando no implementado.</li>
<li><code class="docutils literal notranslate"><span class="pre">550</span></code>: Casilla de correo no disponible.</li>
<li><code class="docutils literal notranslate"><span class="pre">551</span></code>: Usuario no local, significa que ni la dirección de recipiente ni
destinatario pertenecen al servidor.</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="ejemplos">
<h3>Ejemplos<a class="headerlink" href="#ejemplos" title="Enlazar permanentemente con este título">¶</a></h3>
<p>En cada ejemplo, se agregó <code class="docutils literal notranslate"><span class="pre">C:</span></code> para representar al cliente y <code class="docutils literal notranslate"><span class="pre">S:</span></code> para
representar al servidor.</p>
<p>Ejemplo
<a class="reference external" href="https://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol">simple desde Wikipedia</a>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>S: 220 smtp.example.com ESMTP Postfix
C: HELO relay.example.com
S: 250 smtp.example.com, I am glad to meet you
C: MAIL FROM:&lt;bob@example.com&gt;
S: 250 Ok
C: RCPT TO:&lt;alice@example.com&gt;
S: 250 Ok
C: RCPT TO:&lt;theboss@example.com&gt;
S: 250 Ok
C: DATA
S: 354 End data with &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;
C: From: &quot;Bob Example&quot; &lt;bob@example.com&gt;
C: To: Alice Example &lt;alice@example.com&gt;
C: Cc: theboss@example.com
C: Date: Tue, 15 Jan 2008 16:02:43 -0500
C: Subject: Test message
C:
C: Hello Alice.
C: This is a test message with 5 header fields and 4 lines in the message body.
C: Your friend,
C: Bob
C: .
S: 250 Ok: queued as 12345
C: QUIT
S: 221 Bye
{The server closes the connection}
</pre></div>
</div>
<p>Ejemplo
<a class="reference external" href="https://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol">de EHLO desde Wikipedia</a>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>S: 220 smtp2.example.com ESMTP Postfix
C: EHLO bob.example.com
S: 250-smtp2.example.com Hello bob.example.org [192.0.2.201]
S: 250-SIZE 14680064
S: 250-PIPELINING
S: 250 HELP
</pre></div>
</div>
<p>Ejemplo
<a class="reference external" href="http://www.samlogic.net/articles/smtp-commands-reference-auth.htm">que utiliza AUTH desde SamLogic</a>,
la contraseña viaja cifrada en BASE64 pero no es seguro, ya que convertirlo a
texto plano es fácil:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>S: 220 smtp.server.com Simple Mail Transfer Service Ready
C: EHLO client.example.com
S: 250-smtp.server.com Hello client.example.com
S: 250-SIZE 1000000
S: 250 AUTH LOGIN PLAIN CRAM-MD5
C: AUTH PLAIN dGVzdAB0ZXN0ADEyMzQ= *
S: 235 2.7.0 Authentication successful
</pre></div>
</div>
<p>Ejemplo
<a class="reference external" href="http://www.samlogic.net/articles/smtp-commands-reference-auth.htm">que utiliza STARTTLS y AUTH desde SamLogic</a>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>S: 220 smtp.server.com Simple Mail Transfer Service Ready
C: EHLO client.example.com
S: 250-smtp.server.com Hello client.example.com
S: 250-SIZE 1000000
S: 250-AUTH LOGIN PLAIN CRAM-MD5
S: 250-STARTTLS
S: 250 HELP
C: STARTTLS
S: 220 TLS go ahead
[A partir de acá la comunicación viaja cifrada por TLS]
C: EHLO client.example.com
S: 250-smtp.server.com Hello client.example.com
S: 250-SIZE 1000000
S: 250-AUTH LOGIN PLAIN CRAM-MD5
S: 250 HELP
C: AUTH LOGIN
S: 334 VXNlcm5hbWU6
C: adlxdkej
S: 334 UGFzc3dvcmQ6
C: lkujsefxlj
S: 235 2.7.0 Authentication successful
C: MAIL FROM:&lt;mail@samlogic.com&gt;
S: 250 OK
C: RCPT TO:&lt;john@mail.com&gt;
S: 250 OK
C: DATA
S: 354 Send message, end with a &quot;.&quot; on a line by itself
C: &lt;The message data (body text, subject, e-mail header, attachments etc) is sent&gt;
S .
S: 250 OK, message accepted for delivery: queued as 12345
C: QUIT
S: 221 Bye
</pre></div>
</div>
</div>
</div>
<div class="section" id="mime">
<h2>MIME<a class="headerlink" href="#mime" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Multipurpose Internet Mail Extensions.</p>
<ul class="simple">
<li>Permite codificar texto y datos binarios en ASCII de 7 bits para permitir su
transmisión por SMTP.</li>
<li>Define una gran variedad de <em>content types</em> que se utilizan en HTTP.</li>
<li>Si se usa el <em>content type</em> <code class="docutils literal notranslate"><span class="pre">multipart</span></code>, se pueden enviar muchos archivos
codificados en MIME uno abajo del otro. Se define en estos casos una
<em>boundary</em> para separar cada parte del mensaje.</li>
</ul>
<div class="section" id="headers">
<h3>Headers<a class="headerlink" href="#headers" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><strong>MIME-Version:</strong>: Indica que el mensaje está codificado en MIME, siempre
lleva <code class="docutils literal notranslate"><span class="pre">1.0</span></code></li>
<li><strong>Content-Type:</strong>: Indica el tipo de medio del contenido, incluyendo el tipo y
el subtipo. Si no se especifica se supone que es <code class="docutils literal notranslate"><span class="pre">text/plain</span></code>. También puede
llevar el argumento <code class="docutils literal notranslate"><span class="pre">charset</span></code> que especifica la codificación de caracteres
en uso en el caso que no sea ASCII, por ejemplo <code class="docutils literal notranslate"><span class="pre">iso-8859-1</span></code>.</li>
<li><strong>Content-Disposition:</strong>: Tiene campos que especifican el nombre del archivo,
fechas de creación y modificación. También lleva <code class="docutils literal notranslate"><span class="pre">inline</span></code> si el archivo debe
mostrarse dentro del mensaje o <code class="docutils literal notranslate"><span class="pre">attachment</span></code> si es un archivo adjunto.</li>
<li><strong>Content-ID</strong>: Se usa sobre todo en mensajes multiparte, identifica una parte
de un mensaje.</li>
<li><strong>Content-Transfer-Encoding</strong>: Especifica cómo se enviarán caracteres no
ASCII, <code class="docutils literal notranslate"><span class="pre">base64</span></code> es apropiado para datos binarios mientras que
<code class="docutils literal notranslate"><span class="pre">quoted-printable</span></code> es útil para texto que por ejemplo tiene unos pocos
acentos.</li>
<li><strong>Content-Description</strong>: Describe al contenido, no muy usado.</li>
</ul>
</div>
<div class="section" id="tipos-de-contenido">
<h3>Tipos de contenido<a class="headerlink" href="#tipos-de-contenido" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El <em>content type</em> se especifica como <code class="docutils literal notranslate"><span class="pre">tipo/subtipo</span></code>, algunos de los más
conocidos son:</p>
<ul class="simple">
<li><strong>text</strong>:<ul>
<li><strong>plain</strong>: Texto plano, generalmente ASCII. Es el <em>content type</em> por defecto.</li>
<li><strong>html</strong>.</li>
<li><strong>css</strong>.</li>
<li><strong>javascript</strong>.</li>
</ul>
</li>
<li><strong>application</strong>:<ul>
<li><strong>octet-stream</strong>: Es el formato por defecto para tipos de archivos desconocidos.</li>
<li><strong>x-rar-compressed</strong>: Para archivos <code class="docutils literal notranslate"><span class="pre">.rar</span></code>.</li>
<li><strong>vnd.oasis.opendocument.text</strong>: Para <code class="docutils literal notranslate"><span class="pre">.odt</span></code>.</li>
<li><strong>msword</strong>: Para archivos <code class="docutils literal notranslate"><span class="pre">.doc</span></code>.</li>
<li><strong>vnd.openxmlformats-officedocument.wordprocessingml.document</strong>:
Para <code class="docutils literal notranslate"><span class="pre">.docx</span></code>.</li>
</ul>
</li>
<li><strong>multipart</strong>:<ul>
<li><strong>mixed</strong>: Especifica que cada sección es parte de un mismo mensaje. Es el más
común.</li>
<li><strong>alternative</strong>: Cada parte es una versión alternativa o similar del mismo
contenido.</li>
</ul>
</li>
<li><strong>image</strong>:<ul>
<li><strong>bmp</strong>.</li>
<li><strong>png</strong>.</li>
<li><strong>jpeg</strong>.</li>
</ul>
</li>
<li><strong>audio</strong>:<ul>
<li><strong>aac</strong>.</li>
<li><strong>mpeg</strong>: Para <code class="docutils literal notranslate"><span class="pre">.mp3</span></code>.</li>
</ul>
</li>
<li><strong>video</strong>:<ul>
<li><strong>webm</strong>.</li>
<li><strong>x-msvideo</strong>: Para <code class="docutils literal notranslate"><span class="pre">.avi</span></code>.</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id3">
<h3>Ejemplos<a class="headerlink" href="#id3" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Ejemplo de
<a class="reference external" href="https://hunnysoft.com/mime/samples/index.html">imagen PNG sacado de HunnySoft</a>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Content-Type: image/png; name=&quot;2aa5e03a.png&quot;
Content-ID: &lt;4.2.0.58.20000519003903.00a859b0@pop.example.com.2&gt;
Content-Transfer-Encoding: base64
Content-Disposition: inline; filename=&quot;2aa5e03a.png&quot;

iVBORw0KGgoAAAANSUhEUgAAABsAAAAbCAMAAAC6CgRnAAADAFBMVEX///8AAAgAABAAABgAAAAA
CCkAEEIAEEoACDEAEFIIIXMIKXsIKYQIIWsAGFoACDkIIWMQOZwYQqUYQq0YQrUQOaUQMZQAGFIQ
MYwpUrU5Y8Y5Y84pWs4YSs4YQs4YQr1Ca8Z7nNacvd6Mtd5jlOcxa94hUt4YStYYQsYQMaUAACHO
5+/n7++cxu9ShO8pWucQOa1Ke86tzt6lzu9ajO8QMZxahNat1ufO7++Mve9Ke+8YOaUYSsaMvee1
5++Uve8AAClajOdzpe9rnO8IKYwxY+8pWu8IIXsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAADBMg1VAAAAAXRSTlMAQObYZgAAABZ0RVh0U29mdHdhcmUAZ2lmMnBuZyAyLjAu
MT1evmgAAAGISURBVHicddJtV5swGAbgEk6AJhBSk4bMCUynBSLaqovbrG/bfPn/vyh70lbssceb
L5xznTsh5BmNhgQoRChwo50EOIohUYLDj4zHhKYQkrEoQdvock4ne0IKMVUpKZLQDeqSTIsv+18P
yqqWUw2IBsRM7307PPp+fDJrWtnpLDJvewYxnewfnvanZ+fzpmwXijC8KbqEa3Fx2ff91Y95U9XC
UpaDeQwiMpHXP/v+1++bWVPWQoGFawtjury9vru/f/C1Vi7ezT0WWpQHf/7+u/G71aLThK/MjRxm
T6KdzZ9fGk9yatMsTgZLl3XVgFRAC6spj/13enssqJVtWVa3NdBSacL8+VZmYqKmdd1CSYoOiMOS
GwtzlqqlFFIuOqv0a1ZEZrUkWICLLFW266y1KvWE1zV/iDAH1EopnVLCiygZCIomH3NCKX0lnI+B
1iuuzCGTxwXjnDO4d7NpbX42YJJHkBwmAm2TxwAZg40J3+Xtbv1rgOAZwG0NxW62p+lT+Yi747sD
/wEUVMzYmWkOvwAAACV0RVh0Q29tbWVudABjbGlwMmdpZiB2LjAuNiBieSBZdmVzIFBpZ3VldDZz
O7wAAAAASUVORK5CYII=
</pre></div>
</div>
<p>Ejemplo de mail multiparte desde RFC 1341, las primeras tres líneas vienen del
estándar proveniente del RFC 822, luego viene el mensaje en MIME:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>From: Nathaniel Borenstein &lt;nsb@bellcore.com&gt;
To:  Ned Freed &lt;ned@innosoft.com&gt;
Subject: Sample message
MIME-Version: 1.0
Content-type: multipart/mixed; boundary=&quot;simple
boundary&quot;

This is the preamble.  It is to be ignored, though it
is a handy place for mail composers to include an
explanatory note to non-MIME compliant readers.
--simple boundary

This is implicitly typed plain ASCII text.
It does NOT end with a linebreak.
--simple boundary
Content-type: text/plain; charset=us-ascii

This is explicitly typed plain ASCII text.
It DOES end with a linebreak.

--simple boundary--
This is the epilogue.  It is also to be ignored.
</pre></div>
</div>
<p>Ejemplo de
<a class="reference external" href="https://en.wikipedia.org/wiki/MIME">mensaje multiparte desde Wikipedia</a>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>MIME-Version: 1.0
Content-Type: multipart/mixed; boundary=frontier

This is a message with multiple parts in MIME format.
--frontier
Content-Type: text/plain

This is the body of the message.
--frontier
Content-Type: application/octet-stream
Content-Transfer-Encoding: base64

PGh0bWw+CiAgPGhlYWQ+CiAgPC9oZWFkPgogIDxib2R5PgogICAgPHA+VGhpcyBpcyB0aGUg
Ym9keSBvZiB0aGUgbWVzc2FnZS48L3A+CiAgPC9ib2R5Pgo8L2h0bWw+Cg==
--frontier--
</pre></div>
</div>
<p>Ejemplo de mail que utiliza <code class="docutils literal notranslate"><span class="pre">quoted-printable</span></code>,
<a class="reference external" href="https://hunnysoft.com/mime/samples/index.html">tomado de HunnySoft</a>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>MIME-Version: 1.0
Content-Type: text/plain;
  charset=&quot;iso-8859-1&quot;
Content-Transfer-Encoding: quoted-printabl

Die Hasen und die Fr=F6sche

Die Hasen klagten einst =FCber ihre mi=DFliche Lage; &quot;wir leben&quot;, sprach =
ein Redner, &quot;in steter Furcht vor Menschen und Tieren, eine Beute der =
Hunde, der Adler, ja fast aller Raubtiere! Unsere stete Angst ist =
=E4rger als der Tod selbst. Auf, la=DFt uns ein f=FCr allemal sterben.&quot;=20

In einem nahen Teich wollten sie sich nun ers=E4ufen; sie eilten ihm zu; =
allein das au=DFerordentliche Get=F6se und ihre wunderbare Gestalt =
erschreckte eine Menge Fr=F6sche, die am Ufer sa=DFen, so sehr, da=DF =
sie aufs schnellste untertauchten.=20

&quot;Halt&quot;, rief nun eben dieser Sprecher, &quot;wir wollen das Ers=E4ufen noch =
ein wenig aufschieben, denn auch uns f=FCrchten, wie ihr seht, einige =
Tiere, welche also wohl noch ungl=FCcklicher sein m=FCssen als wir.&quot;=20
</pre></div>
</div>
</div>
</div>
<div class="section" id="pop3">
<h2>POP3<a class="headerlink" href="#pop3" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Post Office Protocol.</p>
<ul class="simple">
<li>Permite al usuario obtener mails desde un servidor de correos.</li>
<li>Al descargar los correos generalmente éstos son borrados del servidor.</li>
<li>Usa el puerto TCP 110 para la conexión sin cifrado, luego con el comando STLS
es posible cifrar la conexión. Para iniciar la conexión directamente con TLS
se utiliza el puerto 995.</li>
</ul>
<div class="section" id="id4">
<h3>Comandos<a class="headerlink" href="#id4" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Los más comunes son:</p>
<ul class="simple">
<li><strong>USER</strong>: Indica el nombre de usuario.</li>
<li><strong>PASS</strong>: Indica la contraseña.</li>
<li><strong>APOP</strong>: Método alternativo de autenticación utilizando MD5.</li>
<li><strong>STAT</strong>: Solicita cantidad de mensajes y el tamaño total de ellos.</li>
<li><strong>LIST</strong>: Solicita información sobre los mensajes disponibles.</li>
<li><strong>RETR</strong>: Se envía como argumento el número de mensaje a obtener.</li>
<li><strong>DELE</strong>: Se envía como argumento el número de mensaje a borrar.</li>
<li><strong>QUIT</strong>: Termina la sesión.</li>
</ul>
</div>
<div class="section" id="id5">
<h3>Respuestas<a class="headerlink" href="#id5" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Llevan además una descripción.</p>
<ul class="simple">
<li><strong>OK</strong>.</li>
<li><strong>ERR</strong>.</li>
</ul>
</div>
<div class="section" id="id6">
<h3>Ejemplos<a class="headerlink" href="#id6" title="Enlazar permanentemente con este título">¶</a></h3>
<p>En cada ejemplo, se agregó <code class="docutils literal notranslate"><span class="pre">C:</span></code> para representar al cliente y <code class="docutils literal notranslate"><span class="pre">S:</span></code> para
representar al servidor.</p>
<p>Ejemplo proveniente de RFC 1939:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>S: +OK POP3 server ready &lt;1896.697170952@dbc.mtview.ca.us&gt;
C: APOP mrose c4c9334bac560ecc979e58001b3e22fb
S: +OK mrose&#39;s maildrop has 2 messages (320 octets)
C: STAT
S: +OK 2 320
C: LIST
S: +OK 2 messages (320 octets)
S: 1 120
S: 2 200
S: .
C: RETR 1
S: +OK 120 octets
S: &lt;the POP3 server sends message 1&gt;
S: .
C: DELE 1
S: +OK message 1 deleted
C: RETR 2
S: +OK 200 octets
S: &lt;the POP3 server sends message 2&gt;
S: .
C: DELE 2
S: +OK message 2 deleted
C: QUIT
S: +OK dewey POP3 server signing off (maildrop empty)
</pre></div>
</div>
</div>
</div>
<div class="section" id="imap">
<h2>IMAP<a class="headerlink" href="#imap" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Internet Message Access Protocol.</p>
<ul class="simple">
<li>Permite al usuario obtener mails desde un servidor de correos.</li>
<li>Al descargar los correos generalmente éstos se mantienen en el servidor.</li>
<li>Usa el puerto TCP 143 para la conexión sin cifrado. IMAP sobre TLS (IMAPS)
utiliza el puerto 993.</li>
</ul>
<div class="section" id="id7">
<h3>Comandos<a class="headerlink" href="#id7" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Hay muchos, algunos son:</p>
<ul class="simple">
<li><strong>LOGIN</strong>: Se envía el nombre de usuario y contraseña en texto plano.</li>
<li><strong>AUTHENTICATE</strong>: Inicia un mecanismo de autenticación SASL más seguro.</li>
<li><strong>CREATE</strong>: Crea una casilla de correo con el nombre dado.</li>
<li><strong>CREATE</strong>: Borra una casilla de correo con el nombre dado.</li>
<li><strong>SELECT</strong>: Selecciona una casilla de correo, el servidor responde con el
número de mensajes e información extra.</li>
<li><strong>SEARCH</strong>: Busca mensajes en la casilla seleccionada.</li>
<li><strong>FETCH</strong>: Solicita partes de un correo o un correo completo.</li>
<li><strong>CLOSE</strong>: Deselecciona una casilla de correo.</li>
</ul>
</div>
<div class="section" id="id8">
<h3>Respuestas<a class="headerlink" href="#id8" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Llevan también información adicional.</p>
<ul class="simple">
<li><strong>OK</strong>.</li>
<li><strong>NO</strong>: Describe un error operacional.</li>
<li><strong>BAD</strong>: Describe un error de nivel de protocolo en el comando dado.</li>
<li><strong>PREAUTH</strong>: Indica que ya se ha autenticado al usuario por otros medios.</li>
<li><strong>BYE</strong>.</li>
</ul>
</div>
<div class="section" id="id9">
<h3>Ejemplos<a class="headerlink" href="#id9" title="Enlazar permanentemente con este título">¶</a></h3>
<p>En cada ejemplo, se agregó <code class="docutils literal notranslate"><span class="pre">C:</span></code> para representar al cliente y <code class="docutils literal notranslate"><span class="pre">S:</span></code> para
representar al servidor.</p>
<p>Ejemplo proveniente de RFC 3501:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>S: * OK IMAP4rev1 Service Ready
C: a001 login mrc secret
S: a001 OK LOGIN completed
C: a002 select inbox
S: * 18 EXISTS
S: * FLAGS (\Answered \Flagged \Deleted \Seen \Draft)
S: * 2 RECENT
S: * OK [UNSEEN 17] Message 17 is the first unseen message
S: * OK [UIDVALIDITY 3857529045] UIDs valid
S: a002 OK [READ-WRITE] SELECT completed
C: a003 fetch 12 full
S: * 12 FETCH (FLAGS (\Seen) INTERNALDATE &quot;17-Jul-1996 02:44:25 -0700&quot;
    RFC822.SIZE 4286 ENVELOPE (&quot;Wed, 17 Jul 1996 02:23:25 -0700 (PDT)&quot;
    &quot;IMAP4rev1 WG mtg summary and minutes&quot;
    ((&quot;Terry Gray&quot; NIL &quot;gray&quot; &quot;cac.washington.edu&quot;))
    ((&quot;Terry Gray&quot; NIL &quot;gray&quot; &quot;cac.washington.edu&quot;))
    ((&quot;Terry Gray&quot; NIL &quot;gray&quot; &quot;cac.washington.edu&quot;))
    ((NIL NIL &quot;imap&quot; &quot;cac.washington.edu&quot;))
    ((NIL NIL &quot;minutes&quot; &quot;CNRI.Reston.VA.US&quot;)
    (&quot;John Klensin&quot; NIL &quot;KLENSIN&quot; &quot;MIT.EDU&quot;)) NIL NIL
    &quot;&lt;B27397-0100000@cac.washington.edu&gt;&quot;)
     BODY (&quot;TEXT&quot; &quot;PLAIN&quot; (&quot;CHARSET&quot; &quot;US-ASCII&quot;) NIL NIL &quot;7BIT&quot; 3028
     92))
S:  a003 OK FETCH completed
C:  a004 fetch 12 body[header]
S:  * 12 FETCH (BODY[HEADER] {342}
S:  Date: Wed, 17 Jul 1996 02:23:25 -0700 (PDT)
S:  From: Terry Gray &lt;gray@cac.washington.edu&gt;
S:  Subject: IMAP4rev1 WG mtg summary and minutes
S:  To: imap@cac.washington.edu
S:  cc: minutes@CNRI.Reston.VA.US, John Klensin &lt;KLENSIN@MIT.EDU&gt;
S:  Message-Id: &lt;B27397-0100000@cac.washington.edu&gt;
S:  MIME-Version: 1.0
S:  Content-Type: TEXT/PLAIN; CHARSET=US-ASCII
S:
S:  )
S:  a004 OK FETCH completed
C:  a005 store 12 +flags \deleted
S:  * 12 FETCH (FLAGS (\Seen \Deleted))
S:  a005 OK +FLAGS completed
C:  a006 logout
S:  * BYE IMAP4rev1 server terminating connection
S:  a006 OK LOGOUT completed
</pre></div>
</div>
</div>
</div>
<div class="section" id="referencias">
<h2>Referencias<a class="headerlink" href="#referencias" title="Enlazar permanentemente con este título">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol">https://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol</a></li>
<li><a class="reference external" href="https://cr.yp.to/immhf.html">https://cr.yp.to/immhf.html</a></li>
</ul>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ftp.html" class="btn btn-neutral float-right" title="FTP" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="dns.html" class="btn btn-neutral" title="DNS" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018-2019, Martín Bernardi.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>