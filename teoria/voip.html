

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>VOIP &mdash; documentación de Arquitectura de Redes - </title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Índice"
              href="../genindex.html"/>
        <link rel="search" title="Búsqueda" href="../search.html"/>
    <link rel="top" title="documentación de Arquitectura de Redes - " href="../index.html"/>
        <link rel="up" title="Teoría" href="index.html"/>
        <link rel="next" title="Gestión de redes" href="gestion.html"/>
        <link rel="prev" title="Multimedia" href="multimedia.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Arquitectura de Redes
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Teoría</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#principal">Principal</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#wan-y-ruteo">WAN y ruteo</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#capa-aplicacion-y-otros">Capa aplicación y otros</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="6to4.html">6to4</a></li>
<li class="toctree-l3"><a class="reference internal" href="dns.html">DNS</a></li>
<li class="toctree-l3"><a class="reference internal" href="mail.html">Mail</a></li>
<li class="toctree-l3"><a class="reference internal" href="ftp.html">FTP</a></li>
<li class="toctree-l3"><a class="reference internal" href="http.html">HTTP</a></li>
<li class="toctree-l3"><a class="reference internal" href="p2p.html">P2P</a></li>
<li class="toctree-l3"><a class="reference internal" href="multimedia.html">Multimedia</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">VOIP</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#partes-involucradas">Partes involucradas</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sip">SIP</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sdp">SDP</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="gestion.html">Gestión de redes</a></li>
<li class="toctree-l3"><a class="reference internal" href="seguridad.html">Seguridad</a></li>
<li class="toctree-l3"><a class="reference internal" href="tls.html">TLS</a></li>
<li class="toctree-l3"><a class="reference internal" href="qos.html">QOS</a></li>
<li class="toctree-l3"><a class="reference internal" href="acceso_remoto.html">Acceso remoto</a></li>
<li class="toctree-l3"><a class="reference internal" href="gns3.html">GNS3</a></li>
<li class="toctree-l3"><a class="reference internal" href="wireshark.html">Wireshark</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../practica/index.html">Práctica</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Arquitectura de Redes</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Teoría</a> &raquo;</li>
        
      <li>VOIP</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/teoria/voip.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="voip">
<h1>VOIP<a class="headerlink" href="#voip" title="Enlazar permanentemente con este título">¶</a></h1>
<p>Acá hay información sobre VoIP en sí, señalización, etc. Ver también sobre
transmisión de audio en <a class="reference internal" href="multimedia.html"><span class="doc">Multimedia</span></a>.</p>
<ul class="simple">
<li>En comparación con la telefonía tradicional permite menores costos, calidad
similar, utilizar redes IP que son muy extendidas, etc. Como desventaja puede
haber pérdida de paquetes, jitter, degradación de calidad, altos retardos,
etc.</li>
<li>La señalización permite por ejemplo:<ul>
<li>Informar al dispositivo llamado para hacer sonar.</li>
<li>Informar al dispositivo que llama sobre la conexión.</li>
<li>Evitar llamadas a dispositivos ocupados.</li>
<li>Registrar la llamada, incluyendo la duración.</li>
</ul>
</li>
<li>Algunos protocolos de señalización: SIP, MGCP, SCCP, H.323, IAX, etc.</li>
<li>Algunos sistemas propietarios:<ul>
<li>Skype.</li>
<li>Cisco Skinny (SCCP).</li>
</ul>
</li>
<li>Algunos sistemas abiertos:<ul>
<li>SIP.</li>
<li>H.323.</li>
<li>IAX.</li>
</ul>
</li>
</ul>
<div class="section" id="partes-involucradas">
<h2>Partes involucradas<a class="headerlink" href="#partes-involucradas" title="Enlazar permanentemente con este título">¶</a></h2>
<ul class="simple">
<li>Los teléfonos IP son similares a los tradicionales pero tienen entrada
Ethernet y dirección IP.</li>
<li>Los softphones son software para llamadas que se puede instalar en ordenadores
(estilo Skype).</li>
<li>Foreign Exchange Station (FXS): Es una interfaz (puerto) que provee energía,
tono de marcado y genera tensión de llamada (para el ring). Son los puertos
que proveen los PSTN a los clientes, es donde se
conectan los teléfonos tradicionales.</li>
<li>Foreign Exchange Office (FXO): Es una interfaz (puerto) que señalizan cuando
la línea está colgada o cortada, son los puertos que tienen los teléfonos
tradicionales.</li>
<li>Public Switched Telephone Network (PSTN): Red Telefonía Básica (RTB), se
refiere a teléfonos tradicionales en lugar de VoIP.</li>
<li>Private Branch Exchange (PBX): Es una central telefónica privada que conecta a
todos los teléfonos internos y generalmente está conectada a unas pocas líneas
telefónicas externas. Por lo tanto de un lado tiene FXO para conectarse a por
ejemplo la PSTN y en el caso del teléfono tradicional tiene FXS para los
teléfonos internos.</li>
<li>Gateway (GWY): Permiten interconectar y transformar llamadas tradicionales en
IP y viceversa. Se clasifican dependiendo de si tienen puertos FXS o FXO:<ul>
<li>Gateway FXS: Tienen puertos FXS que permite conectar teléfonos tradicionales
a una central IP.</li>
<li>Gateway FXO: Tienen puertos FXO que permite conectar la central IP a la
PSTN.</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="sip">
<h2>SIP<a class="headerlink" href="#sip" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Session Initiation Protocol.</p>
<p>El protocolo tienen muchas aplicaciones además de VoIP pero explico todo lo
relacionado a llamadas de voz.</p>
<ul class="simple">
<li>Son mensajes de control que se envían fuera de banda.</li>
<li>A diferencia del flujo de audio, SIP usa un puerto conocido.</li>
<li>Es basado en texto, similar a HTTP o SMTP.</li>
<li>Trabaja con URIs de la forma <code class="docutils literal notranslate"><span class="pre">usuario&#64;host</span></code> para describir a los diferentes
dispositivos. Antes de la arroba se escribe el número de teléfono o nombre de
usuario, luego se coloca el nombre de dominio o dirección IP.</li>
<li>Usa el protocolo SDP (Session Description Protocol) encapsulado dentro del
datagrama SIP para negociar el tipo de multimedia y los parámetros a utilizar.</li>
<li>Se puede usar sobre UDP, TCP, SCTP o TLS. Generalmente usa puerto 5060, o 5061
en el caso de usar TLS.</li>
<li>Permite señalizar y configurar llamadas VoIP punto a punto, sesiones
multimedia multicast, videollamadas permitiendo agregar y quitar usuarios en
vivo, etc.</li>
<li>Tipos de agentes:<ul>
<li>User Agent (UA): Es un punto que maneja las sesiones SIP. Se subdivide en
User Agent Client (UAC) y User Agent Server (UAS), todos los dispositivos
cumplen las funciones de cliente y de servidor en momentos distintos.</li>
<li>Proxy Server: Es un servidor que además es UA, permite rutear peticiones
primero determinando si el usuario puede realizar la llamada. Actúa de
intermediario entre agentes SIP, una vez establecida la conexión los agentes
se comunican directamente. Generalmente contienen un registrar.</li>
<li>Registrar: Es un dispositivo que acepta requests REGISTER almacenando la
dirección y otros parámetros del UA. Luego permite a UAs a localizar otros
UAs para realizar llamadas, algo así como un DNS.</li>
<li>Gateway: Permite conectar redes SIP a otras redes, por ejemplo PSTN como
expliqué arriba.</li>
</ul>
</li>
</ul>
<div class="section" id="peticiones">
<h3>Peticiones<a class="headerlink" href="#peticiones" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Estas son las más usadas en VoIP:</p>
<ul class="simple">
<li>REGISTER: Solicita registrar un UA para que los demás UAs lo puedan encontrar.</li>
<li>INVITE: Inicia o modifica una llamada, por ejemplo al poner una llamada en
espera.</li>
<li>ACK: Confirma una solicitud INVITE.</li>
<li>BYE: Corta una llamada.</li>
<li>CANCEL: Cancela una solicitud, por ejemplo para cortar una llamada mientras
todavía ésta está sonando.</li>
</ul>
</div>
<div class="section" id="respuestas">
<h3>Respuestas<a class="headerlink" href="#respuestas" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">1XX</span></code>: La operación se ha iniciado correctamente.<ul>
<li><code class="docutils literal notranslate"><span class="pre">100</span></code>: Intentando.</li>
<li><code class="docutils literal notranslate"><span class="pre">180</span></code>: Sonando.</li>
</ul>
</li>
<li><code class="docutils literal notranslate"><span class="pre">2XX</span></code>: La operación se ha completado correctamente.<ul>
<li><code class="docutils literal notranslate"><span class="pre">200</span></code>: Comando OK.</li>
</ul>
</li>
<li><code class="docutils literal notranslate"><span class="pre">3XX</span></code>: Para redirección, debe hacerse la petición a otro destino.<ul>
<li><code class="docutils literal notranslate"><span class="pre">301</span></code>: Movido permanentemente, indica hacia dónde.</li>
<li><code class="docutils literal notranslate"><span class="pre">302</span></code>: Movido temporalmente, indica hacia dónde.</li>
</ul>
</li>
<li><code class="docutils literal notranslate"><span class="pre">4XX</span></code>: Falla general.<ul>
<li><code class="docutils literal notranslate"><span class="pre">400</span></code>: Error de sintaxis.</li>
<li><code class="docutils literal notranslate"><span class="pre">401</span></code>: Sin autorización.</li>
<li><code class="docutils literal notranslate"><span class="pre">404</span></code>: No encontrado.</li>
<li><code class="docutils literal notranslate"><span class="pre">486</span></code>: Ocupado.</li>
</ul>
</li>
<li><code class="docutils literal notranslate"><span class="pre">5XX</span></code>: Comando válido pero el servidor no pudo completar la operación.<ul>
<li><code class="docutils literal notranslate"><span class="pre">500</span></code>: Error interno.</li>
<li><code class="docutils literal notranslate"><span class="pre">501</span></code>: Comando no implementado.</li>
</ul>
</li>
<li><code class="docutils literal notranslate"><span class="pre">6XX</span></code>: No se puede completar la petición en ningún servidor.<ul>
<li><code class="docutils literal notranslate"><span class="pre">600</span></code>: Todos los destinos ocupados.</li>
<li><code class="docutils literal notranslate"><span class="pre">603</span></code>: Llamada rechazada.</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="sdp">
<h2>SDP<a class="headerlink" href="#sdp" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Session Description Protocol.</p>
<ul class="simple">
<li>Va dentro de peticiones SIP, por ejemplo en peticiones INVITE o respuestas de
OK.</li>
<li>Negocia el tipo de multimedia, formato y demás propiedades</li>
</ul>
<div class="section" id="campos">
<h3>Campos<a class="headerlink" href="#campos" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Copiado desde RFC 4566:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Session description
   v=  (protocol version)
   o=  (originator and session identifier)
   s=  (session name)
   i=* (session information)
   u=* (URI of description)
   e=* (email address)
   p=* (phone number)
   c=* (connection information -- not required if included in
        all media)
   b=* (zero or more bandwidth information lines)
   One or more time descriptions (&quot;t=&quot; and &quot;r=&quot; lines; see below)
   z=* (time zone adjustments)
   k=* (encryption key)
   a=* (zero or more session attribute lines)
   Zero or more media descriptions

Time description
   t=  (time the session is active)
   r=* (zero or more repeat times)

Media description, if present
   m=  (media name and transport address)
   i=* (media title)
   c=* (connection information -- optional if included at
        session level)
   b=* (zero or more bandwidth information lines)
   k=* (encryption key)
   a=* (zero or more media attribute lines)
</pre></div>
</div>
<p>Ejemplo copiado desde RFC 4566:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>v=0
o=jdoe 2890844526 2890842807 IN IP4 10.47.16.5
s=SDP Seminar
i=A Seminar on the session description protocol
u=http://www.example.com/seminars/sdp.pdf
e=j.doe@example.com (Jane Doe)
c=IN IP4 224.2.17.12/127
t=2873397496 2873404696
a=recvonly
m=audio 49170 RTP/AVP 0
m=video 51372 RTP/AVP 99
a=rtpmap:99 h263-1998/90000
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="gestion.html" class="btn btn-neutral float-right" title="Gestión de redes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="multimedia.html" class="btn btn-neutral" title="Multimedia" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018-2019, Martín Bernardi.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>